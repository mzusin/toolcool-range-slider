{
  "version": 3,
  "sources": ["../../src/domain/max-provider.ts", "../../src/app/range-slider.ts", "../../src/index.ts"],
  "sourcesContent": ["/**\n * scale a range [min,max] to [a,b]\n * f(x) = (b - a) * (x - min) / (max - min) + a\n */\nexport const convertRange = (min: number, max: number, a: number, b: number, x: number) => {\n  return ((b - a) * (x - min)) / (max - min) + a;\n};\n\nexport const getNumber = (input: any, defaultValue: any) => {\n  const isNumber = !isNaN(parseFloat(input)) && isFinite(input);\n  return isNumber ? Number(input) : defaultValue;\n};\n", "// @ts-ignore: esbuild custom loader\nimport styles from './styles.pcss';\nimport { convertRange, getNumber } from '../domain/max-provider';\n\n/*\n Usage:\n ------\n <toolcool-range-slider value=\"0\" min=\"0\" max=\"100\"></toolcool-range-slider>\n <toolcool-range-slider value=\"0\" min=\"-100\" max=\"100\" step=\"1\"></toolcool-range-slider>\n */\nclass RangeSlider extends HTMLElement {\n  // ------------------------- INIT ----------------\n\n  static get observedAttributes() {\n    return ['value', 'min', 'max', 'step'];\n  }\n\n  private _$slider: HTMLElement | null;\n  private _$pointer: HTMLElement | null;\n\n  private _value: number = 0; // [min, max]\n  private _min: number = 0;\n  private _max: number = 100;\n  private _step: number | undefined = undefined;\n\n  constructor() {\n    super();\n\n    this.attachShadow({\n      mode: 'open', // 'closed', 'open',\n    });\n\n    this.pointerClicked = this.pointerClicked.bind(this);\n    this.onMouseDown = this.onMouseDown.bind(this);\n    this.onMouseUp = this.onMouseUp.bind(this);\n    this.onValueChange = this.onValueChange.bind(this);\n    this.pointerKeyDown = this.pointerKeyDown.bind(this);\n    this.getSafeValues = this.getSafeValues.bind(this);\n    this.render = this.render.bind(this);\n  }\n\n  // ----------- APIs ------------------------\n\n  /**\n   * value in [min, max] range\n   */\n  public set value(num: number) {\n    const safe = this.getSafeValues(num, this.min, this.max);\n    this._value = safe.value;\n    this.render();\n  }\n\n  /**\n   * returns value from [min, max] range\n   */\n  public get value() {\n    return this._value;\n  }\n\n  public set min(num: number) {\n    const safe = this.getSafeValues(this.value, num, this.max);\n    this._min = safe.min;\n    this.render();\n  }\n\n  public get min() {\n    return this._min;\n  }\n\n  public set max(num: number) {\n    const safe = this.getSafeValues(this.value, this.min, num);\n    this._max = safe.max;\n    this.render();\n  }\n\n  public get max() {\n    return this._max;\n  }\n\n  public set step(num: number | undefined) {\n    const range = Math.abs(this.max - this.min);\n    if (num !== undefined && num > range) {\n      num = undefined;\n    }\n    this._step = num;\n  }\n\n  public get step() {\n    return this._step;\n  }\n\n  // ----------------------------------------------\n\n  getSafeValues(value: number, min: number, max: number) {\n    let _min = min;\n    let _max = max;\n    let _val = value;\n\n    if (_min > _max) {\n      _max = _min + 100;\n    }\n\n    if (_val < _min) {\n      _val = _min;\n    }\n\n    if (_val > _max) {\n      _val = _max;\n    }\n\n    return {\n      min: _min,\n      max: _max,\n      value: _val,\n    };\n  }\n\n  render() {\n    if (!this._$pointer) return;\n\n    const percent = convertRange(this.min, this.max, 0, 100, this.value);\n\n    this._$pointer.style.left = `${percent}%`;\n  }\n\n  pointerClicked() {\n    this._$pointer?.focus();\n  }\n\n  pointerKeyDown(evt: KeyboardEvent) {\n    switch (evt.key) {\n      case 'ArrowLeft': {\n        const step = getNumber(this.step, 1);\n        const safe = this.getSafeValues(this.value - step, this.min, this.max);\n        this.value = safe.value;\n        this.render();\n        break;\n      }\n\n      case 'ArrowRight': {\n        const step = getNumber(this.step, 1);\n        const safe = this.getSafeValues(this.value + step, this.min, this.max);\n        this.value = safe.value;\n        this.render();\n        break;\n      }\n    }\n  }\n\n  onMouseDown(evt: MouseEvent) {\n    if (evt.preventDefault) {\n      evt.preventDefault();\n    }\n\n    this.onValueChange(evt);\n    window.addEventListener('mousemove', this.onValueChange);\n    window.addEventListener('mouseup', this.onMouseUp);\n  }\n\n  onMouseUp() {\n    window.removeEventListener('mousemove', this.onValueChange);\n    window.removeEventListener('mouseup', this.onValueChange);\n  }\n\n  onValueChange(evt: MouseEvent | TouchEvent) {\n    if (!this._$slider) return;\n\n    const { width: boxWidth, left: boxLeft } = this._$slider.getBoundingClientRect();\n    let mouseX;\n\n    if (evt.type.indexOf('mouse') !== -1) {\n      mouseX = (evt as MouseEvent).clientX;\n    } else {\n      mouseX = (evt as TouchEvent).touches[0].clientX;\n    }\n\n    const left = Math.min(Math.max(0, mouseX - boxLeft), boxWidth);\n    const percent = (left * 100) / boxWidth;\n    this.value = Math.round(convertRange(0, 100, this.min, this.max, percent));\n    this.render();\n  }\n\n  // ------------------------- WEB COMPONENT LIFECYCLE ----------------------------\n\n  /**\n   * when the custom element connected to DOM\n   */\n  connectedCallback() {\n    if (!this.shadowRoot) return;\n\n    // initial values of attributes\n    this.min = getNumber(this.getAttribute('min'), 0);\n    this.max = getNumber(this.getAttribute('max'), 100);\n    this.value = getNumber(this.getAttribute('value'), this.min);\n\n    const percent = convertRange(this.min, this.max, 0, 100, this.value);\n\n    this.shadowRoot.innerHTML = `\n        <style>\n            ${styles} \n        </style>\n\n        <div class=\"range-slider\">\n          <div class=\"container\">\n            <div class=\"panel\"></div>\n            \n            <div class=\"container\">\n              <div class=\"pointer\" tabindex=\"0\" style=\"left: ${percent}%;\">\n                <div class=\"pointer-shape\"></div>\n              </div>\n            </div>\n            \n          </div>\n        </div>\n    `;\n\n    // update the initial position of the pointer\n    this.render();\n\n    // init slider element and its events\n    this._$slider = this.shadowRoot.querySelector('.range-slider');\n    this._$slider?.addEventListener('mousedown', this.onMouseDown);\n    this._$slider?.addEventListener('mouseup', this.onMouseUp);\n    this._$slider?.addEventListener('touchmove', this.onValueChange);\n    this._$slider?.addEventListener('touchstart', this.onValueChange);\n\n    // init pointer and its events\n    this._$pointer = this.shadowRoot.querySelector('.pointer');\n    this._$pointer?.addEventListener('click', this.pointerClicked);\n    this._$pointer?.addEventListener('keydown', this.pointerKeyDown);\n  }\n\n  /**\n   * when the custom element disconnected from DOM\n   */\n  disconnectedCallback() {\n    this._$pointer?.removeEventListener('click', this.pointerClicked);\n    this._$pointer?.removeEventListener('keydown', this.pointerClicked);\n\n    this._$slider?.removeEventListener('mousedown', this.onMouseDown);\n    this._$slider?.removeEventListener('mouseup', this.onMouseUp);\n    this._$slider?.removeEventListener('touchmove', this.onValueChange);\n    this._$slider?.removeEventListener('touchstart', this.onValueChange);\n  }\n\n  /**\n   * when attributes change\n   */\n  attributeChangedCallback(attrName: string) {\n    if (attrName === 'min') {\n      this.min = getNumber(this.getAttribute('min'), 0);\n      this.render();\n    }\n\n    if (attrName === 'max') {\n      this.max = getNumber(this.getAttribute('max'), 100);\n      this.render();\n    }\n\n    if (attrName === 'value') {\n      this.value = getNumber(this.getAttribute('value'), this.min);\n      this.render();\n    }\n\n    if (attrName === 'step') {\n      this.step = getNumber(this.getAttribute('step'), undefined);\n    }\n  }\n}\n\nexport default RangeSlider;\n", "import RangeSlider from './app/range-slider';\n\n/*\n Usage:\n Demo:\n */\n\n// register web components\nif (!customElements.get('toolcool-range-slider')) {\n  customElements.define('toolcool-range-slider', RangeSlider);\n}\n"],
  "mappings": "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",
  "names": ["convertRange", "min", "max", "a", "b", "x", "getNumber", "input", "defaultValue", "RangeSlider", "__publicField", "num", "safe", "range", "value", "min", "max", "_min", "_max", "_val", "percent", "convertRange", "_a", "evt", "step", "getNumber", "boxWidth", "boxLeft", "mouseX", "_b", "_c", "_d", "_e", "_f", "styles_default", "attrName", "range_slider_default", "range_slider_default"]
}
