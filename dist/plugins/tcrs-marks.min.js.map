{
  "version": 3,
  "sources": ["../../src/core/domain/math-provider.ts", "../../src/plugins/marks-plugin/index.ts"],
  "sourcesContent": ["/**\n * scale a range [min,max] to [a,b]\n * f(x) = (b - a) * (x - min) / (max - min) + a\n */\nexport const convertRange = (min: number, max: number, a: number, b: number, x: number) => {\n  const temp = (max - min);\n  if(temp === 0) return a;\n  return ((b - a) * (x - min)) / temp + a;\n};\n\n// eslint-disable-next-line\nexport const isNumber = (input: any) => {\n  return !isNaN(parseFloat(input)) && isFinite(input);\n};\n\n// the below function should receive any\n// eslint-disable-next-line\nexport const getNumber = (input: any, defaultValue: any) : number => {\n  return isNumber(input) ? Number(input) : defaultValue;\n};\n\n/**\n * Round up to the next multiple of X,\n * where X is the step provided by the user.\n */\nexport const roundToStep = (num: number, step: number) => {\n  return step === 0 ? 0 : Math.round(num / step) * step;\n};\n\n/**\n * round to decimal places\n * https://stackoverflow.com/questions/11832914/how-to-round-to-at-most-2-decimal-places-if-necessary\n */\nexport const setDecimalPlaces = (num: number, decimalPlaces = Infinity) => {\n  if (decimalPlaces === Infinity) return num;\n\n  const coeff = 10 ** decimalPlaces;\n  return Math.round(num * coeff) / coeff;\n};\n\nexport const getBoolean = (val: string | null | undefined | boolean) => {\n  if(val === null || val === undefined) return false;\n  if(typeof val === 'boolean') return val;\n  return val.trim().toLowerCase() === 'true';\n};\n", "import { IPlugin, IPluginGetters, IPluginSetters, IPluginUpdateData } from '../../core/plugins/interfaces';\nimport RangeSlider from '../../core';\nimport { convertRange, getBoolean, getNumber } from '../../core/domain/math-provider';\n\n/**\n * Marks Plugin.\n * Important: the plugin script should be included BEFORE the core script.\n */\n\n/**\n * Required: init ToolCool Range Slider plugins namespace if not defined yet\n */\nwindow.tcRangeSliderPlugins = window.tcRangeSliderPlugins || [];\n\nconst MARKS_STEP_COUNT_DEFAULT = 11;\nconst MARKS_VALUES_COUNT_DEFAULT = 11;\n\nconst MarksPlugin = () : IPlugin => {\n\n  let $component: HTMLElement | null = null;\n  let getters: IPluginGetters | null = null;\n\n  let $marks: HTMLElement | null = null;\n  let $markPoints: HTMLElement | null = null;\n  let $markValues: HTMLElement | null = null;\n\n  let enabled = false;\n  let marksCount = MARKS_STEP_COUNT_DEFAULT;\n  let marksValuesCount = MARKS_VALUES_COUNT_DEFAULT;\n\n  const createMarksBox = () => {\n    const $slider = $component?.shadowRoot?.querySelector('#range-slider')  as HTMLElement;\n    $marks = document.createElement('div');\n    $marks.classList.add('marks');\n\n    $markPoints = document.createElement('div');\n    $markPoints.classList.add('mark-points');\n    $marks.append($markPoints);\n\n    $markValues = document.createElement('div');\n    $markValues.classList.add('mark-values');\n    $marks.append($markValues);\n\n    $slider.append($marks);\n  };\n\n  const updateClasses = () => {\n    if(!getters || !$marks) return;\n    $marks.classList.toggle('is-reversed', getters.isRightToLeft() || getters.isBottomToTop());\n  };\n\n  const createMarks = () => {\n    if(!$marks || !getters) return;\n\n    const min = getters.getMin();\n    const max = getters.getMax();\n\n    const isReversed = getters.isRightToLeft() || getters.isBottomToTop();\n\n    for(let i=0; i<marksCount; i++){\n      const $mark = document.createElement('div');\n      $mark.classList.add('mark', `mark-${ i }`);\n\n      const percent = marksCount === 0 ? 0 : i * 100 / (marksCount - 1);\n\n      if(isReversed){\n        $mark.style.left = `${ 100 - percent }%`;\n      }\n      else{\n        $mark.style.left = `${ percent }%`;\n      }\n\n      $markPoints.append($mark);\n    }\n\n    for(let i=0; i<marksValuesCount; i++){\n      const $value = document.createElement('div');\n      $value.classList.add('mark-value', `mark-value-${ i }`);\n\n      const percent = marksValuesCount === 0 ? 0 : i * 100 / (marksValuesCount - 1);\n      const val = convertRange(0, marksValuesCount - 1, min, max, i);\n\n      $value.textContent = val.toString();\n\n      if(isReversed){\n        $value.style.left = `${ 100 - percent }%`;\n      }\n      else{\n        $value.style.left = `${ percent }%`;\n      }\n\n      $markValues.append($value);\n    }\n  };\n\n  const updateSteps = (_markStep: number, _makeValueStep: number) => {\n    destroy();\n\n    marksCount = _markStep;\n    marksValuesCount = _makeValueStep;\n\n    if(marksCount <= 0){\n      marksCount = MARKS_STEP_COUNT_DEFAULT;\n    }\n\n    if(marksValuesCount <= 0){\n      marksValuesCount = MARKS_VALUES_COUNT_DEFAULT;\n    }\n\n    createMarksBox();\n    createMarks();\n    updateClasses();\n  };\n\n  const toggleEnabled = (_enabled: boolean) => {\n    enabled = _enabled;\n\n    if(!enabled){\n      destroy();\n    }\n    else{\n      createMarksBox();\n      createMarks();\n      updateClasses();\n    }\n  };\n\n  const destroy = () => {\n    $marks?.remove();\n  };\n\n  return {\n\n    /**\n     * Required: unique plugin name\n     */\n    get name() {\n      return 'Marks';\n    },\n\n    /**\n     * Optional: plugin initialization\n     */\n    init: (\n      _$component,\n      _requestUpdate,\n      _setters: IPluginSetters,\n      _getters: IPluginGetters\n    ) => {\n      getters = _getters;\n      $component = _$component;\n\n      enabled = getBoolean($component.getAttribute('marks'));\n      updateSteps(\n        getNumber($component.getAttribute('marks-count'), MARKS_STEP_COUNT_DEFAULT),\n        getNumber($component.getAttribute('marks-values-count'), MARKS_VALUES_COUNT_DEFAULT)\n      );\n    },\n\n    /**\n     * Optional:\n     * this will be called each time observed HTML attribute changes;\n     * observed attributes are defined in window.tcRangeSliderObservedAttr array above.\n     */\n    onAttrChange: (_attrName: string, _newValue: string) => {\n      if(_attrName === 'marks'){\n        toggleEnabled(getBoolean(_newValue));\n      }\n\n      if(_attrName === 'marks-count'){\n        updateSteps(getNumber(_newValue, MARKS_STEP_COUNT_DEFAULT), marksValuesCount);\n      }\n\n      if(_attrName === 'marks-values-count'){\n        updateSteps(marksCount, getNumber(_newValue, MARKS_VALUES_COUNT_DEFAULT));\n      }\n    },\n\n    /**\n     * Optional:\n     * List of getters and setter that can be used to create slider API.\n     */\n    gettersAndSetters: [\n      {\n        name: 'marksEnabled',\n        attributes: {\n          get () {\n            return enabled ?? false;\n          },\n\n          set: (_enabled) => {\n            toggleEnabled(getBoolean(_enabled));\n          },\n        }\n      },\n\n      {\n        name: 'marksCount',\n        attributes: {\n          get () {\n            return marksCount ?? MARKS_STEP_COUNT_DEFAULT;\n          },\n\n          set: (_newStep) => {\n            updateSteps(getNumber(_newStep, MARKS_STEP_COUNT_DEFAULT), marksValuesCount);\n          },\n        }\n      },\n\n      {\n        name: 'marksValuesCount',\n        attributes: {\n          get () {\n            return marksCount ?? MARKS_STEP_COUNT_DEFAULT;\n          },\n\n          set: (_newStep) => {\n            updateSteps(marksCount, getNumber(_newStep, MARKS_VALUES_COUNT_DEFAULT));\n          },\n        }\n      },\n\n    ],\n\n    destroy,\n\n    css: `\n.marks{\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  position: relative;\n  top: 100%;\n  left: 0;\n  color: #475569;\n}\n    \n.mark-points{\n  width: 100%;\n  height: 1rem;\n  position: relative;\n  margin-top: 5px;\n}  \n\n.mark-values{\n  width: 100%;\n  height: 1rem;\n  position: relative;\n}\n\n.mark{\n  background: #cbd5e1;\n  width: 2px;\n  height: 5px;\n  position: absolute;\n  transform: translateX(-50%);\n}  \n\n.mark-value{\n  position: absolute;\n  transform: translateX(-50%);\n}\n    `,\n  };\n};\n\n/**\n * Required: add current plugin to the plugins list.\n */\nwindow.tcRangeSliderPlugins.push(MarksPlugin);\n\nexport default MarksPlugin;\n\n/**\n * export dynamic properties\n */\nexport interface IMarksPlugin extends RangeSlider{\n  marksEnabled: boolean;\n  marksCount: number;\n  marksValuesCount: number;\n}\n"],
  "mappings": "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",
  "names": ["convertRange", "min", "max", "a", "b", "x", "temp", "isNumber", "input", "getNumber", "defaultValue", "getBoolean", "val", "MARKS_STEP_COUNT_DEFAULT", "MARKS_VALUES_COUNT_DEFAULT", "MarksPlugin", "$component", "getters", "$marks", "$markPoints", "$markValues", "enabled", "marksCount", "marksValuesCount", "createMarksBox", "_a", "$slider", "updateClasses", "createMarks", "min", "max", "isReversed", "i", "$mark", "percent", "$value", "val", "convertRange", "updateSteps", "_markStep", "_makeValueStep", "destroy", "toggleEnabled", "_enabled", "_$component", "_requestUpdate", "_setters", "_getters", "getBoolean", "getNumber", "_attrName", "_newValue", "_newStep", "marks_plugin_default"]
}
