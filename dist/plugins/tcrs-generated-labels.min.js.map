{
  "version": 3,
  "sources": ["../../src/core/domain/math-provider.ts", "../../src/plugins/generated-labels-plugin/index.ts"],
  "sourcesContent": ["/**\n * scale a range [min,max] to [a,b]\n * f(x) = (b - a) * (x - min) / (max - min) + a\n */\nexport const convertRange = (min: number, max: number, a: number, b: number, x: number) => {\n  const temp = (max - min);\n  if(temp === 0) return a;\n  return ((b - a) * (x - min)) / temp + a;\n};\n\n// eslint-disable-next-line\nexport const isNumber = (input: any) => {\n  return !isNaN(parseFloat(input)) && isFinite(input);\n};\n\n// the below function should receive any\n// eslint-disable-next-line\nexport const getNumber = (input: any, defaultValue: any) : number => {\n  return isNumber(input) ? Number(input) : defaultValue;\n};\n\n/**\n * Round up to the next multiple of X,\n * where X is the step provided by the user.\n */\nexport const roundToStep = (num: number, step: number) => {\n  return step === 0 ? 0 : Math.round(num / step) * step;\n};\n\n/**\n * round to decimal places\n * https://stackoverflow.com/questions/11832914/how-to-round-to-at-most-2-decimal-places-if-necessary\n */\nexport const setDecimalPlaces = (num: number, decimalPlaces = Infinity) => {\n  if (decimalPlaces === Infinity) return num;\n\n  const coeff = 10 ** decimalPlaces;\n  return Math.round(num * coeff) / coeff;\n};\n\nexport const getBoolean = (val: string | null | undefined | boolean) => {\n  if(val === null || val === undefined) return false;\n  if(typeof val === 'boolean') return val;\n  return val.trim().toLowerCase() === 'true';\n};\n", "import { IPlugin, IPluginGetters, IPluginSetters, IPluginUpdateData } from '../../core/plugins/interfaces';\nimport { getBoolean } from '../../core/domain/math-provider';\nimport RangeSlider from '../../core';\n\n/**\n * Generated Labels Plugin.\n * Important: the plugin script should be included BEFORE the core script.\n */\n\n/**\n * Required: init ToolCool Range Slider plugins namespace if not defined yet\n */\nwindow.tcRangeSliderPlugins = window.tcRangeSliderPlugins || [];\n\nconst MIN_LABEL_CODE_NAME = 'min-label';\nconst MAX_LABEL_CODE_NAME = 'max-label';\nconst DEFAULT_TEXT_COLOR = '#1E293B';\n\nconst GeneratedLabelsPlugin = () : IPlugin => {\n\n  let $component: HTMLElement | null = null;\n  let $slider :HTMLElement | null = null;\n  let getters: IPluginGetters | null = null;\n\n  let enabled = false;\n  let textColor = DEFAULT_TEXT_COLOR;\n  let units = '';\n\n  let $labelsRow: HTMLElement | null = null;\n  let $min: HTMLElement | null = null;\n  let $max: HTMLElement | null = null;\n  let $labels: (HTMLElement | undefined)[] = [];\n\n  const createLabelsRow = () => {\n    const $box = $component?.shadowRoot?.querySelector('.range-slider-box')  as HTMLElement;\n    $labelsRow = document.createElement('div');\n    $labelsRow.classList.add('labels-row');\n    $box.prepend($labelsRow);\n  };\n\n  const createLabel = (className: string) => {\n    const $label = document.createElement('label');\n    $label.className = className;\n    $label.setAttribute('for', 'range-slider');\n    return $label;\n  };\n\n  const createLabels = () => {\n    const isReversedOrder = getters?.isRightToLeft() || getters?.isBottomToTop();\n\n    $min = createLabel(MIN_LABEL_CODE_NAME);\n    $min.textContent = getLabelText(getters?.getTextMin(), units);\n\n    $max = createLabel(MAX_LABEL_CODE_NAME);\n    $max.textContent = getLabelText(getters?.getTextMax(), units);\n\n    if(!isReversedOrder){\n      $slider?.before($min);\n      $slider?.after($max);\n    }\n    else{\n      $slider?.after($min);\n      $slider?.before($max);\n    }\n\n    const values = getters?.getValues();\n    if(!values) return;\n\n    for(let i=0; i<values.length; i++){\n\n      const $label = createLabel(`value${ i + 1 }-label generated-label`);\n      $label.textContent = getLabelText(values[i], units);\n      $labels.push($label);\n\n      if(!isReversedOrder){\n        $labelsRow?.append($label);\n      }\n      else{\n        $labelsRow?.prepend($label);\n      }\n    }\n  };\n\n  const destroy = () => {\n    for(const $label of $labels){\n      if(!$label) continue;\n      $label.remove();\n    }\n\n    $min?.remove();\n    $max?.remove();\n    $labelsRow?.remove();\n\n    $labels = [];\n  };\n\n  const toggleEnabled = (_enabled: boolean) => {\n    enabled = _enabled;\n\n    if(!enabled){\n      destroy();\n    }\n    else{\n      createLabelsRow();\n      createLabels();\n    }\n  };\n\n  const setTextColor = (newValue: string) => {\n\n    textColor = newValue;\n    for(const $label of $labels){\n      if(!$label) continue;\n      $label.style.color = textColor ?? DEFAULT_TEXT_COLOR;\n    }\n\n    if($min){\n      $min.style.color = textColor ?? DEFAULT_TEXT_COLOR;\n    }\n\n    if($max){\n      $max.style.color = textColor ?? DEFAULT_TEXT_COLOR;\n    }\n  };\n\n  const setUnits = (newValue: string) => {\n    units = newValue;\n  };\n\n  const updateClasses = () => {\n    if(!getters || !$labelsRow) return;\n    $labelsRow.classList.toggle('is-reversed', getters.isRightToLeft() || getters.isBottomToTop());\n  };\n\n  const getLabelText = (value: string | number | undefined, units: string) => {\n    return `${ (value ?? '').toString() }${ units }`;\n  };\n\n  const update = (data: IPluginUpdateData) => {\n\n    if(!enabled || !data.values) return;\n\n    updateClasses();\n\n    for(let i=0; i<data.values.length; i++){\n      const value = data.values[i];\n      const $label = $labels[i];\n\n      if(value === undefined && !!$label){\n        // remove the label\n        $label.remove();\n        $labels[i] = undefined;\n        continue;\n      }\n\n      if(value !== undefined && !$label){\n\n        // create the label\n        const $label = createLabel(`value${ i + 1 }-label generated-label`);\n        $label.textContent = getLabelText(value, units);\n        $labels[i] = $label;\n\n        // add the label to the proper place\n        if(data.values.length <= 0){\n          $labelsRow?.append($label);\n        }\n        else{\n          const isReversedOrder = getters?.isRightToLeft() || getters?.isBottomToTop();\n\n          if(i === 0){\n            if(!isReversedOrder){\n              $labelsRow?.prepend($label);\n            }\n            else{\n              $labelsRow?.append($label);\n            }\n          }\n          else{\n            // get the previous label\n            const $prev = $labels[i - 1];\n            if(!isReversedOrder){\n              $prev?.after($label);\n            }\n            else{\n              $prev?.before($label);\n            }\n          }\n        }\n        continue;\n      }\n\n      if(!$label) continue;\n      $label.textContent = getLabelText(value, units);\n    }\n\n    if($min){\n      $min.textContent = getLabelText(data.textMin, units);\n    }\n\n    if($max){\n      $max.textContent = getLabelText(data.textMax, units);\n    }\n\n    setTextColor(textColor);\n  };\n\n  return {\n\n    /**\n     * Required: unique plugin name\n     */\n    get name() {\n      return 'Generated Labels';\n    },\n\n    /**\n     * Optional: plugin initialization\n     */\n    init: (\n      _$component,\n      _requestUpdate,\n      _setters: IPluginSetters,\n      _getters: IPluginGetters\n    ) => {\n      $component = _$component;\n      getters = _getters;\n      $slider = _$component.shadowRoot?.getElementById('range-slider') as HTMLElement;\n\n      textColor = $component.getAttribute('generate-labels-text-color') ?? DEFAULT_TEXT_COLOR;\n      units = $component.getAttribute('generate-labels-units') ?? '';\n      toggleEnabled(getBoolean($component.getAttribute('generate-labels')));\n\n      updateClasses();\n      setTextColor(textColor);\n    },\n\n    /**\n     * Optional:\n     * this will be called each time\n     * range slider updates pointer positions or other properties\n     */\n    update,\n\n    /**\n     * Optional:\n     * this will be called each time observed HTML attribute changes;\n     * observed attributes are defined in window.tcRangeSliderObservedAttr array above.\n     */\n    onAttrChange: (_attrName: string, _newValue: string) => {\n      if(_attrName === 'generate-labels'){\n        toggleEnabled(getBoolean(_newValue));\n      }\n\n      if(_attrName === 'generate-labels-text-color'){\n        setTextColor(_newValue);\n      }\n\n      if(_attrName === 'generate-labels-units'){\n        setUnits(_newValue);\n      }\n    },\n\n    /**\n     * Optional:\n     * List of getters and setter that can be used to create slider API.\n     */\n    gettersAndSetters: [\n      {\n        name: 'generateLabels',\n        attributes: {\n          get () {\n            return enabled ?? false;\n          },\n\n          set: (_enabled) => {\n            toggleEnabled(getBoolean(_enabled));\n          },\n        }\n      },\n\n      {\n        name: 'textColor',\n        attributes: {\n          get () {\n            return textColor ?? '';\n          },\n\n          set: (newValue) => {\n            setTextColor(newValue);\n          },\n        }\n      },\n\n      {\n        name: 'units',\n        attributes: {\n          get () {\n            return units ?? '';\n          },\n\n          set: (newValue) => {\n            setUnits(newValue);\n          },\n        }\n      },\n    ],\n\n    /**\n     * Optional:\n     * Small groups of CSS rules can be passed here as a string.\n     * Bigger CSS files should be passed via css-links=\"file1.css;file2.css;\" property.\n     */\n    css: `\n    .labels-row{\n      text-align: center;\n      display: flex;\n      justify-content: center;\n    }\n    \n    .is-reversed,\n    .is-reversed + .row{\n      flex-direction: row-reverse;\n    }\n    \n    .type-vertical{\n      position: relative;\n    }\n    \n    .type-vertical .labels-row{\n      flex-direction: column;\n      position: absolute;\n      top: 50%;\n      right: -100%;\n      transform: translateY(-50%);\n    }\n    \n    .type-vertical .is-reversed,\n    .type-vertical .is-reversed + .row{\n      flex-direction: column-reverse;\n    }\n    \n    .max-label,\n    .min-label{\n      margin: 0 1rem;\n      width: 2rem;\n      text-align: center;\n      white-space: nowrap;\n    }\n    \n    .generated-label{\n      text-align: center;\n      margin: 0 0.5rem;\n      white-space: nowrap;\n    }\n    `,\n\n    destroy,\n  };\n};\n\n/**\n * Required: add current plugin to the plugins list.\n */\nwindow.tcRangeSliderPlugins.push(GeneratedLabelsPlugin);\n\nexport default GeneratedLabelsPlugin;\n\n/**\n * export dynamic properties\n */\nexport interface IGeneratedLabelsPlugin extends RangeSlider{\n  generateLabels: boolean;\n  textColor: string;\n  units: string;\n}"],
  "mappings": "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",
  "names": ["getBoolean", "val", "MIN_LABEL_CODE_NAME", "MAX_LABEL_CODE_NAME", "DEFAULT_TEXT_COLOR", "GeneratedLabelsPlugin", "$component", "$slider", "getters", "enabled", "textColor", "units", "$labelsRow", "$min", "$max", "$labels", "createLabelsRow", "_a", "$box", "createLabel", "className", "$label", "createLabels", "isReversedOrder", "getLabelText", "values", "i", "destroy", "toggleEnabled", "_enabled", "setTextColor", "newValue", "setUnits", "updateClasses", "value", "_$component", "_requestUpdate", "_setters", "_getters", "_b", "_c", "getBoolean", "data", "$prev", "_attrName", "_newValue", "generated_labels_plugin_default"]
}
