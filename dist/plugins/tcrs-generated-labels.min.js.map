{
  "version": 3,
  "sources": ["../../src/core/domain/math-provider.ts", "../../src/plugins/generated-labels-plugin/index.ts"],
  "sourcesContent": ["/**\n * scale a range [min,max] to [a,b]\n * f(x) = (b - a) * (x - min) / (max - min) + a\n */\nexport const convertRange = (min: number, max: number, a: number, b: number, x: number) => {\n  const temp = (max - min);\n  if(temp === 0) return a;\n  return ((b - a) * (x - min)) / temp + a;\n};\n\n// eslint-disable-next-line\nexport const isNumber = (input: any) => {\n  return !isNaN(parseFloat(input)) && isFinite(input);\n};\n\n// the below function should receive any\n// eslint-disable-next-line\nexport const getNumber = (input: any, defaultValue: any) : number => {\n  return isNumber(input) ? Number(input) : defaultValue;\n};\n\n/**\n * Round up to the next multiple of X,\n * where X is the step provided by the user.\n */\nexport const roundToStep = (num: number, step: number) => {\n  return step === 0 ? 0 : Math.round(num / step) * step;\n};\n\n/**\n * round to decimal places\n * https://stackoverflow.com/questions/11832914/how-to-round-to-at-most-2-decimal-places-if-necessary\n */\nexport const setDecimalPlaces = (num: number, decimalPlaces = Infinity) => {\n  if (decimalPlaces === Infinity) return num;\n\n  const coeff = 10 ** decimalPlaces;\n  return Math.round(num * coeff) / coeff;\n};\n\nexport const getBoolean = (val: string | null | undefined | boolean) => {\n  if(val === null || val === undefined) return false;\n  if(typeof val === 'boolean') return val;\n  return val.trim().toLowerCase() === 'true';\n};\n", "import { IPlugin } from '../../core/plugins/interfaces';\nimport { getBoolean } from '../../core/domain/math-provider';\n\n/**\n * Generated Labels Plugin.\n * Important: the plugin script should be included BEFORE the core script.\n */\n\n/**\n * Required: init ToolCool Range Slider plugins namespace if not defined yet\n */\nwindow.tcRangeSliderPlugins = window.tcRangeSliderPlugins || [];\n\n/**\n * Optional: array of attribute names to monitor for changes\n * Read more: https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements\n */\nwindow.tcRangeSliderObservedAttr = window.tcRangeSliderObservedAttr || [];\nwindow.tcRangeSliderObservedAttr.push('generate-labels');\n\nconst VALUE_LABEL1_CODE_NAME = 'value-label';\nconst VALUE_LABEL2_CODE_NAME = 'value2-label';\nconst MIN_LABEL_CODE_NAME = 'min-label';\nconst MAX_LABEL_CODE_NAME = 'max-label';\n\nconst GeneratedLabelsPlugin = () : IPlugin => {\n\n  let requestUpdate: (() => void) | null = null;\n  let $component: HTMLElement | null = null;\n  let $slider: HTMLElement | null = null;\n  let $labelsRow: HTMLElement | null = null;\n  let generatedLabelsEnabled = false;\n\n  let $genValue1Label: HTMLElement | null = null;\n  let $genValue2Label: HTMLElement | null = null;\n  let $genMinLabel: HTMLElement | null = null;\n  let $genMaxLabel: HTMLElement | null = null;\n\n  // ---------- HELPERS ------------------------------\n\n  const createLabel = (codeName: string) => {\n    const $label = document.createElement('label');\n    $label.classList.add(codeName);\n    $label.setAttribute('for', 'range-slider');\n    return $label;\n  };\n\n  const getOuterSlot = (codeName: string) => {\n    return $component?.querySelector(`[slot=\"${ codeName }\"]`);\n  };\n\n  const getInnerSlot = (codeName: string) => {\n    return $component?.shadowRoot?.querySelector(`slot[name=\"${ codeName }\"]`);\n  };\n\n  const getLabelFromSlot = (codeName: string) => {\n    const $slot = getOuterSlot(codeName);\n\n    if(!$slot) return null;\n    return $slot.querySelector(`.${ codeName }`) as HTMLElement;\n  };\n\n  const createGenerateLabels = (\n    textValue1: string | number | undefined,\n    textValue2: string | number | undefined,\n    rtlOrBtt: boolean,\n    min: number | string | undefined,\n    max: number | string | undefined\n  ) => {\n\n    if(!$genValue1Label){\n      // create first generated label ---------------------\n      $genValue1Label = getLabelFromSlot(VALUE_LABEL1_CODE_NAME);\n      if(!$genValue1Label){\n        $genValue1Label = createLabel(VALUE_LABEL1_CODE_NAME);\n        $labelsRow?.append($genValue1Label);\n      }\n    }\n\n    if(!$genValue2Label){\n      // create second generated label --------------------\n      if(textValue2 !== undefined){\n        $genValue2Label = getLabelFromSlot(VALUE_LABEL2_CODE_NAME);\n        if(!$genValue2Label){\n          $genValue2Label = createLabel(VALUE_LABEL2_CODE_NAME);\n          $labelsRow?.append($genValue2Label);\n        }\n      }\n    }\n\n    if(!$genMinLabel){\n      $genMinLabel = getLabelFromSlot(MIN_LABEL_CODE_NAME);\n      if(!$genMinLabel){\n        $genMinLabel = createLabel(MIN_LABEL_CODE_NAME);\n        $slider?.after($genMinLabel);\n      }\n    }\n\n    if(!$genMaxLabel){\n      $genMaxLabel = getLabelFromSlot(MAX_LABEL_CODE_NAME);\n      if(!$genMaxLabel){\n        $genMaxLabel = createLabel(MAX_LABEL_CODE_NAME);\n        $slider?.after($genMaxLabel);\n      }\n    }\n\n    setLabelsOrder(rtlOrBtt);\n    updateValues(textValue1, textValue2, min, max);\n  };\n\n  const removeGeneratedLabels = () => {\n    if($genValue1Label){\n      $genValue1Label.remove();\n      $genValue1Label = null;\n    }\n\n    if($genValue2Label){\n      $genValue2Label.remove();\n      $genValue2Label = null;\n    }\n\n    if($genMaxLabel){\n      $genMaxLabel.remove();\n      $genMaxLabel = null;\n    }\n\n    if($genMinLabel){\n      $genMinLabel.remove();\n      $genMinLabel = null;\n    }\n  };\n\n  // -------- APIs -------------------------\n\n  const setGenLabelsEnabled = (enabled: boolean) => {\n    if(enabled === generatedLabelsEnabled) return;\n\n    generatedLabelsEnabled = enabled;\n\n    if(requestUpdate && typeof requestUpdate === 'function'){\n      requestUpdate();\n    }\n  };\n\n  const setLabelsOrder = (rtlOrBtt: boolean) => {\n\n    const label1hasSlot = getOuterSlot(VALUE_LABEL1_CODE_NAME) !== null;\n    const label2hasSlot = getOuterSlot(VALUE_LABEL2_CODE_NAME) !== null;\n    const minHasSlot = getOuterSlot(MIN_LABEL_CODE_NAME) !== null;\n    const maxHasSlot = getOuterSlot(MAX_LABEL_CODE_NAME) !== null;\n\n    const $label1Slot = getInnerSlot(VALUE_LABEL1_CODE_NAME);\n    const $label2Slot = getInnerSlot(VALUE_LABEL2_CODE_NAME);\n    const $minSlot = getInnerSlot(MIN_LABEL_CODE_NAME);\n    const $maxSlot = getInnerSlot(MAX_LABEL_CODE_NAME);\n\n    if(rtlOrBtt){\n\n      if($genValue1Label && $genValue2Label && !label1hasSlot && !label2hasSlot){\n        $genValue2Label.after($genValue1Label);\n      }\n      else{\n        if($label1Slot && $label2Slot){\n          $label2Slot.after($label1Slot);\n        }\n      }\n\n      if($genMinLabel){\n        if(minHasSlot && $minSlot){\n          $slider?.after($minSlot);\n        }\n        else{\n          $slider?.after($genMinLabel);\n        }\n      }\n\n      if($genMaxLabel){\n        if(maxHasSlot && $maxSlot){\n          $slider?.before($maxSlot);\n        }\n        else{\n          $slider?.before($genMaxLabel);\n        }\n      }\n    }\n    else{\n\n      if($genMinLabel){\n        if(minHasSlot && $minSlot){\n          $slider?.before($minSlot);\n        }\n        else{\n          $slider?.before($genMinLabel);\n        }\n      }\n\n      if($genMaxLabel){\n        if(maxHasSlot && $maxSlot){\n          $slider?.after($maxSlot);\n        }\n        else{\n          $slider?.after($genMaxLabel);\n        }\n      }\n\n      if($genValue1Label && $genValue2Label && !label1hasSlot && !label2hasSlot){\n        $genValue1Label.after($genValue2Label);\n      }\n      else{\n        if($label1Slot && $label2Slot){\n          $label1Slot.after($label2Slot);\n        }\n      }\n    }\n  };\n\n  const updateValues = (\n    textValue1: string | number | undefined,\n    textValue2: string | number | undefined,\n    min: number | string | undefined,\n    max: number | string | undefined) => {\n\n    if($genValue1Label && textValue1 !== undefined){\n      $genValue1Label.textContent = textValue1.toString();\n    }\n\n    if($genValue2Label && textValue2 !== undefined){\n      $genValue2Label.textContent = textValue2.toString();\n    }\n\n    if($genMinLabel){\n      $genMinLabel.textContent = min === undefined ? '' : min.toString();\n    }\n\n    if($genMaxLabel){\n      $genMaxLabel.textContent = max === undefined ? '' : max.toString();\n    }\n  };\n\n  return {\n\n    /**\n     * Required: unique plugin name\n     */\n    get name() {\n      return 'Generated Labels';\n    },\n\n    /**\n     * Optional: plugin initialization\n     */\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    init: (_$component, _requestUpdate, _updatePointers) => {\n      $component = _$component;\n      requestUpdate = _requestUpdate;\n\n      $slider = _$component.shadowRoot?.getElementById('range-slider') as HTMLElement;\n\n      // generate labels row with slots\n      const $box = _$component.shadowRoot?.querySelector('.range-slider-box')  as HTMLElement;\n      $labelsRow = document.createElement('div');\n      $labelsRow.classList.add('labels-row');\n      $labelsRow.innerHTML = `\n        <slot name=\"value-label\"></slot>\n        <slot name=\"value2-label\"></slot>\n      `;\n      $box.prepend($labelsRow);\n\n      // generate min / max slots\n      const $min = document.createElement('slot');\n      $min.setAttribute('name', 'min-label');\n      $slider.before($min);\n\n      const $max = document.createElement('slot');\n      $max.setAttribute('name', 'max-label');\n      $slider.after($max);\n\n      setGenLabelsEnabled(getBoolean($component.getAttribute('generate-labels')));\n    },\n\n    /**\n     * Optional:\n     * this will be called each time\n     * range slider updates pointer positions\n     */\n    /* eslint-disable @typescript-eslint/no-unused-vars */\n    update: (\n      _percent1: number,\n      _percent2: number | undefined,\n      _textValue1: string | number | undefined,\n      _textValue2: string | number | undefined,\n      _min: number,\n      _max: number,\n      _textMin: number | string | undefined,\n      _textMax: number | string | undefined,\n      _rightToLeft: boolean,\n      _bottomToTop: boolean\n    ) => {\n\n      if(generatedLabelsEnabled){\n        createGenerateLabels(_textValue1, _textValue2, _rightToLeft || _bottomToTop, _textMin, _textMax);\n      }\n      else{\n        removeGeneratedLabels();\n      }\n    },\n\n    /**\n     * Optional:\n     * this will be called each time observed HTML attribute changes;\n     * observed attributes are defined in window.tcRangeSliderObservedAttr array above.\n     */\n    onAttrChange: (_attrName: string, _oldValue: string, _newValue: string) => {\n      if(_attrName === 'generate-labels'){\n        setGenLabelsEnabled(getBoolean(_newValue));\n      }\n    },\n\n    /**\n     * Optional:\n     * List of getters and setter that can be used to create slider API.\n     */\n    gettersAndSetters: [\n      {\n        name: 'generateLabels',\n        attributes: {\n          get () {\n            return generatedLabelsEnabled ?? false;\n          },\n\n          set: (_enabled) => {\n            setGenLabelsEnabled(getBoolean(_enabled));\n          },\n        }\n      },\n    ],\n\n    /**\n     * Optional:\n     * Small groups of CSS rules can be passed here as a string.\n     * Bigger CSS files should be passed via css-links=\"file1.css;file2.css;\" property.\n     */\n    css: `\n      .labels-row{\n          text-align: center;\n          display: flex;\n          justify-content: center;\n      }\n      \n      .type-vertical .labels-row{\n          flex-direction: column;\n          order: 1;\n      }\n      \n      .max-label,\n      .min-label,\n      ::slotted([slot=\"max-label\"]),\n      ::slotted([slot=\"min-label\"]){\n          margin: 0 1rem;\n          width: 2rem;\n          text-align: center;\n          white-space: nowrap;\n      }\n      \n      .value-label,\n      .value2-label,\n      ::slotted([slot=\"value-label\"]),\n      ::slotted([slot=\"value2-label\"]){\n          text-align: center;\n          margin: 0 0.5rem;\n          white-space: nowrap;\n      }\n\n      .type-vertical .max-label,\n      .type-vertical .min-label,\n      .type-vertical ::slotted([slot=\"max-label\"]),\n      .type-vertical ::slotted([slot=\"min-label\"]){\n          margin: 1rem 0;\n          width: auto;\n      }\n    `,\n  };\n};\n\n/**\n * Required: add current plugin to the plugins list.\n */\nwindow.tcRangeSliderPlugins.push(GeneratedLabelsPlugin);\n\nexport default GeneratedLabelsPlugin;"],
  "mappings": "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",
  "names": ["getBoolean", "val", "VALUE_LABEL1_CODE_NAME", "VALUE_LABEL2_CODE_NAME", "MIN_LABEL_CODE_NAME", "MAX_LABEL_CODE_NAME", "GeneratedLabelsPlugin", "requestUpdate", "$component", "$slider", "$labelsRow", "generatedLabelsEnabled", "$genValue1Label", "$genValue2Label", "$genMinLabel", "$genMaxLabel", "createLabel", "codeName", "$label", "getOuterSlot", "getInnerSlot", "_a", "getLabelFromSlot", "$slot", "createGenerateLabels", "textValue1", "textValue2", "rtlOrBtt", "min", "max", "setLabelsOrder", "updateValues", "removeGeneratedLabels", "setGenLabelsEnabled", "enabled", "label1hasSlot", "label2hasSlot", "minHasSlot", "maxHasSlot", "$label1Slot", "$label2Slot", "$minSlot", "$maxSlot", "_$component", "_requestUpdate", "_updatePointers", "_b", "$box", "$min", "$max", "getBoolean", "_percent1", "_percent2", "_textValue1", "_textValue2", "_min", "_max", "_textMin", "_textMax", "_rightToLeft", "_bottomToTop", "_attrName", "_oldValue", "_newValue", "_enabled", "generated_labels_plugin_default"]
}
